## [7. ]{.secno}[Management]{.content}[](#management){.self-link} {#management .heading .settled level="7"}

Whenever a [storage bucket](#storage-bucket){#ref-for-storage-bucket⑧
link-type="dfn"} is cleared by the user agent, it must be cleared in its
entirety. User agents should avoid clearing [storage
buckets](#storage-bucket){#ref-for-storage-bucket⑨ link-type="dfn"}
while script that is able to access them is running, unless instructed
otherwise by the user.

If removal of [storage
buckets](#storage-bucket){#ref-for-storage-bucket①⓪ link-type="dfn"}
leaves the encompassing [storage
shelf](#storage-shelf){#ref-for-storage-shelf⑨ link-type="dfn"}'s
[bucket map](#bucket-map){#ref-for-bucket-map⑥ link-type="dfn"}
[empty](https://infra.spec.whatwg.org/#map-is-empty){#ref-for-map-is-empty
link-type="dfn"}, then
[remove](https://infra.spec.whatwg.org/#map-remove){#ref-for-map-remove
link-type="dfn"} that [storage
shelf](#storage-shelf){#ref-for-storage-shelf①⓪ link-type="dfn"} and
corresponding [storage key](#storage-key){#ref-for-storage-key⑥
link-type="dfn"} from the encompassing [storage
shed](#storage-shed){#ref-for-storage-shed⑤ link-type="dfn"}.

### [7.1. ]{.secno}[Storage pressure]{.content}[](#storage-pressure){.self-link} {#storage-pressure .heading .settled level="7.1"}

A user agent that comes under storage pressure should clear network
state and [local storage buckets](#bucket){#ref-for-bucket③
link-type="dfn"} whose [mode](#bucket-mode){#ref-for-bucket-mode②
link-type="dfn"} is \"`best-effort`\", ideally prioritizing removal in a
manner that least impacts the user.

If a user agent continues to be under storage pressure, then the user
agent should inform the user and offer a way to clear the remaining
[local storage buckets](#bucket){#ref-for-bucket④ link-type="dfn"},
i.e., those whose [mode](#bucket-mode){#ref-for-bucket-mode③
link-type="dfn"} is \"`persistent`\".

[Session storage
buckets](#session-storage-bucket){#ref-for-session-storage-bucket①
link-type="dfn"} must be cleared as [traversable
navigables](https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable){#ref-for-traversable-navigable④
link-type="dfn"} are closed.

If the user agent allows for revival of [traversable
navigables](https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable){#ref-for-traversable-navigable⑤
link-type="dfn"}, e.g., through reopening [traversable
navigables](https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable){#ref-for-traversable-navigable⑥
link-type="dfn"} or continued use of them after restarting the user
agent, then clearing necessarily involves a more complex set of
heuristics.

### [7.2. ]{.secno}[User interface guidelines]{.content}[](#ui-guidelines){.self-link} {#ui-guidelines .heading .settled level="7.2"}

User agents should offer users the ability to clear network state and
storage for individual websites. User agents should not distinguish
between network state and storage in their user interface. This ensures
network state cannot be used to revive storage and reduces the number of
concepts users need to be mindful of.

Credentials should be separated as they contain data the user might not
be able to revive, such as an autogenerated password. Permissions are
best separated too to avoid inconveniencing the user.

